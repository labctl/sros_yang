(function(){"use strict";var j={exports:{}};j.exports,function(c){var n=function(){var o=String.fromCharCode,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",k={};function v(t,r){if(!k[t]){k[t]={};for(var f=0;f<t.length;f++)k[t][t.charAt(f)]=f}return k[t][r]}var d={compressToBase64:function(t){if(t==null)return"";var r=d._compress(t,6,function(f){return u.charAt(f)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:d._decompress(t.length,32,function(r){return v(u,t.charAt(r))})},compressToUTF16:function(t){return t==null?"":d._compress(t,15,function(r){return o(r+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:d._decompress(t.length,16384,function(r){return t.charCodeAt(r)-32})},compressToUint8Array:function(t){for(var r=d.compress(t),f=new Uint8Array(r.length*2),i=0,l=r.length;i<l;i++){var y=r.charCodeAt(i);f[i*2]=y>>>8,f[i*2+1]=y%256}return f},decompressFromUint8Array:function(t){if(t==null)return d.decompress(t);for(var r=new Array(t.length/2),f=0,i=r.length;f<i;f++)r[f]=t[f*2]*256+t[f*2+1];var l=[];return r.forEach(function(y){l.push(o(y))}),d.decompress(l.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":d._compress(t,6,function(r){return g.charAt(r)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),d._decompress(t.length,32,function(r){return v(g,t.charAt(r))}))},compress:function(t){return d._compress(t,16,function(r){return o(r)})},_compress:function(t,r,f){if(t==null)return"";var i,l,y={},S={},M="",_="",m="",A=2,w=3,p=2,h=[],e=0,a=0,s;for(s=0;s<t.length;s+=1)if(M=t.charAt(s),Object.prototype.hasOwnProperty.call(y,M)||(y[M]=w++,S[M]=!0),_=m+M,Object.prototype.hasOwnProperty.call(y,_))m=_;else{if(Object.prototype.hasOwnProperty.call(S,m)){if(m.charCodeAt(0)<256){for(i=0;i<p;i++)e=e<<1,a==r-1?(a=0,h.push(f(e)),e=0):a++;for(l=m.charCodeAt(0),i=0;i<8;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1}else{for(l=1,i=0;i<p;i++)e=e<<1|l,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=0;for(l=m.charCodeAt(0),i=0;i<16;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1}A--,A==0&&(A=Math.pow(2,p),p++),delete S[m]}else for(l=y[m],i=0;i<p;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1;A--,A==0&&(A=Math.pow(2,p),p++),y[_]=w++,m=String(M)}if(m!==""){if(Object.prototype.hasOwnProperty.call(S,m)){if(m.charCodeAt(0)<256){for(i=0;i<p;i++)e=e<<1,a==r-1?(a=0,h.push(f(e)),e=0):a++;for(l=m.charCodeAt(0),i=0;i<8;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1}else{for(l=1,i=0;i<p;i++)e=e<<1|l,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=0;for(l=m.charCodeAt(0),i=0;i<16;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1}A--,A==0&&(A=Math.pow(2,p),p++),delete S[m]}else for(l=y[m],i=0;i<p;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1;A--,A==0&&(A=Math.pow(2,p),p++)}for(l=2,i=0;i<p;i++)e=e<<1|l&1,a==r-1?(a=0,h.push(f(e)),e=0):a++,l=l>>1;for(;;)if(e=e<<1,a==r-1){h.push(f(e));break}else a++;return h.join("")},decompress:function(t){return t==null?"":t==""?null:d._decompress(t.length,32768,function(r){return t.charCodeAt(r)})},_decompress:function(t,r,f){var i=[],l=4,y=4,S=3,M="",_=[],m,A,w,p,h,e,a,s={val:f(0),position:r,index:1};for(m=0;m<3;m+=1)i[m]=m;for(w=0,h=Math.pow(2,2),e=1;e!=h;)p=s.val&s.position,s.position>>=1,s.position==0&&(s.position=r,s.val=f(s.index++)),w|=(p>0?1:0)*e,e<<=1;switch(w){case 0:for(w=0,h=Math.pow(2,8),e=1;e!=h;)p=s.val&s.position,s.position>>=1,s.position==0&&(s.position=r,s.val=f(s.index++)),w|=(p>0?1:0)*e,e<<=1;a=o(w);break;case 1:for(w=0,h=Math.pow(2,16),e=1;e!=h;)p=s.val&s.position,s.position>>=1,s.position==0&&(s.position=r,s.val=f(s.index++)),w|=(p>0?1:0)*e,e<<=1;a=o(w);break;case 2:return""}for(i[3]=a,A=a,_.push(a);;){if(s.index>t)return"";for(w=0,h=Math.pow(2,S),e=1;e!=h;)p=s.val&s.position,s.position>>=1,s.position==0&&(s.position=r,s.val=f(s.index++)),w|=(p>0?1:0)*e,e<<=1;switch(a=w){case 0:for(w=0,h=Math.pow(2,8),e=1;e!=h;)p=s.val&s.position,s.position>>=1,s.position==0&&(s.position=r,s.val=f(s.index++)),w|=(p>0?1:0)*e,e<<=1;i[y++]=o(w),a=y-1,l--;break;case 1:for(w=0,h=Math.pow(2,16),e=1;e!=h;)p=s.val&s.position,s.position>>=1,s.position==0&&(s.position=r,s.val=f(s.index++)),w|=(p>0?1:0)*e,e<<=1;i[y++]=o(w),a=y-1,l--;break;case 2:return _.join("")}if(l==0&&(l=Math.pow(2,S),S++),i[a])M=i[a];else if(a===y)M=A+A.charAt(0);else return null;_.push(M),i[y++]=A+M.charAt(0),l--,A=M,l==0&&(l=Math.pow(2,S),S++)}}};return d}();c!=null?c.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})}(j);var B=j.exports;const W=new Set;function E(c){return fetch(c,{method:"GET",credentials:"include",headers:{Accept:"application/json"},redirect:"error"}).then(o=>o.arrayBuffer()).then(o=>{const u=B.decompressFromUint8Array(new Uint8Array(o));return JSON.parse(u)})}function z(c,n){return E(`/yang/sros/paths${c}.lzs`).then(o=>{const u=(o??[]).map(v=>{if(typeof v!="string")return console.log("undefined",o),{};const d=v.split(",");return{k:d[0],t:d[2],w:d[1]?d[1].toUpperCase():"T",p:"",d:""}});if(!n)return u;const g=E(`/yang/sros/descriptions${c}.lzs`).then(v=>(v??[]).forEach((d,t)=>{u[t].d=d})),k=E(`/yang/sros/platforms${c}.lzs`).then(v=>(v??[]).forEach((d,t)=>{u[t].p=$(d)})).catch(()=>[]);return Promise.all([g,k]).then(()=>{n()}),u}).catch(o=>(console.error(`Could not load ${c}: ${o}`),[]))}function $(c){if(typeof c!="string")return"";let n="";return c.split(",").forEach(o=>{o.startsWith("S")?o=o.replace("S","SR-"):o.startsWith("E")?o=o.replace("E","ESS-"):o.startsWith("I")?o=o.replace("I","IXR-"):o.startsWith("X")?o=o.replace("X","XRS-"):o.startsWith("N")&&(o=o.replace("N","VSR-NRC")),o&&(o.endsWith("-")&&(o=o.slice(0,o.length-1)),n&&(n+=","),W.add(o),n+=o)}),n}function D(c,n){return c.w!==n.w||c.p!==n.p||c.t!==n.t}function b(c,n){const o=[];let u=0,g=0;for(;u<c.length&&g<n.length;){const k=c[u],v=n[g],d=k.k.localeCompare(v.k);d===0?(D(k,v)&&o.push({k:k.k,change:"mod",old:k,item:v}),u++,g++):d<0?(o.push({change:"del",k:k.k,item:k}),u++):(o.push({change:"add",k:v.k,item:v}),g++)}for(;u<c.length;)o.push({change:"del",k:c[u].k,item:c[u]}),u++;for(;g<n.length;)o.push({change:"add",k:n[g].k,item:n[g]}),g++;return console.debug(`${o.length} differences`),o}const G=[{label:"config",value:"/config",help:"Nokia YANG model: configuration paths"},{label:"groups",value:"/configure/groups",help:"Nokia YANG model: configuration group paths"},{label:"state",value:"/state",help:"Nokia YANG model: state paths"},{label:"OpenConfig",value:"configure openconfig",help:"OpenConfig configuration & state paths from MD-CLI"},{label:"tools",value:"tools",help:"MD-CLI tools commands"},{label:"show",value:"show",help:"MD-CLI show commands"},{label:"other",value:"other",help:"Other MD-CLI commands"}];let U=[];const R=G.map(c=>c.value).sort((c,n)=>n.length-c.length);function N(c,n){if(Object.keys(n).length==0)return c;const o=n.startswith?n.startswith.map(u=>R.indexOf(u)):[];return U.length!=c.length&&(U=X(c,R,R.indexOf("other"))),c.filter((u,g)=>{if(n.startswith&&!o.includes(U[g])||(n.tick||n.cross)&&(n.cross&&n.platforms&&!n.platforms.some(v=>!u.p.includes(v))||n.tick&&n.platforms&&!n.platforms.some(v=>u.p.includes(v))))return!1;if(!n.marks)return!0;let k=0;for(;k<n.marks.length;){if(!u.k.includes(n.marks[k])&&!u.t.includes(n.marks[k]))return!1;k+=1}return!0})}function X(c,n,o){return c.map(u=>{for(let g=0;g<n.length;g++)if(u.k.startsWith(n[g])||n[g]=="configure openconfig"&&u.k.startsWith("state openconfig"))return g;return o})}let T="",x=[];self.onmessage=c=>{const n=c.data;if(n.load){Z(n.load);return}if(n.compare){Y(n.compare);return}if(n.get){postMessage({data:N(x,n.get)});return}console.log("unknown command",n)};function Z(c){z(c,O).then(n=>{x=n,T=c,O()})}function O(){postMessage({info:{ver:T,verOld:L,len:x.length,platforms:[...W]}})}let L;function Y(c){if(c==="x"){postMessage({diffdata:[]}),L=void 0,O();return}let n=[];function o(){postMessage({diffdata:n}),O()}z(c).then(u=>{console.log(`starting compare ${c} --> ${T}`),L=c,n=b(u,x),o()})}})();
